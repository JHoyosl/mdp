{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{O5p6:function(t,e,o){\"use strict\";o.d(e,\"a\",function(){return u});var n=o(\"t/Na\"),r=o(\"67Y/\"),s=o(\"PSD3\"),a=o.n(s),i=o(\"UPSQ\"),c=o(\"AytR\"),p=o(\"CcnG\"),h=o(\"ZYCi\"),u=function(){function t(t,e,o){this.http=t,this.router=e,this.auth=o,this.key=c.a.appKey,this.client=c.a.clientId,this.url=c.a.url}return t.prototype.checkKeys=function(){var t=parseInt(localStorage.getItem(\"expires_in\"));Date.now()+1e4>=t&&this.auth.refreshToken()},t.prototype.getCollection=function(t){this.checkKeys();var e=new n.g({Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.get(this.url+t,{headers:e}).pipe(Object(r.a)(function(t){return console.log(t),t.status?t.data:t},function(t){console.log(t)}))},t.prototype.put=function(t,e){this.checkKeys();var o=new n.g({\"Content-Type\":\"application/x-www-form-urlencoded\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.put(\"\"+this.url+e,t,{headers:o})},t.prototype.store=function(t,e){this.checkKeys();var o=new n.g({Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.post(\"\"+this.url+e,t,{headers:o})},t.prototype.getStatesList=function(t){void 0===t&&(t=47),this.checkKeys();var e=new n.g({\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.get(this.url+\"locations/states/\"+t,{headers:e}).pipe(Object(r.a)(function(t){return t.data}))},t.prototype.getCitiesList=function(t){this.checkKeys();var e=new n.g({\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.get(this.url+\"locations/cities/\"+t,{headers:e}).pipe(Object(r.a)(function(t){return t.data}))},t.prototype.putCompany=function(t){this.checkKeys();var e=new n.g({\"Content-Type\":\"application/x-www-form-urlencoded\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")}),o=(new n.h).set(\"nit\",t.nit).set(\"name\",t.name).set(\"sector\",t.sector).set(\"address\",t.address).set(\"phone\",t.phone).set(\"country_id\",t.country_id).set(\"state_id\",t.state_id).set(\"city_id\",t.city_id).set(\"location_id\",t.location_id);return this.http.put(this.url+\"companies/\"+t.id,o,{headers:e})},t.prototype.putBanc=function(t){this.checkKeys();var e=new n.g({\"Content-Type\":\"application/x-www-form-urlencoded\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")}),o=(new n.h).set(\"cod_comp\",t.cod_comp).set(\"nit\",t.nit).set(\"name\",t.name).set(\"portal\",t.portal).set(\"currency\",t.currency);return this.http.put(this.url+\"bancs/\"+t.id,o,{headers:e})},t.prototype.putAccount=function(t){this.checkKeys();var e=new n.g({\"Content-Type\":\"application/x-www-form-urlencoded\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")}),o=(new n.h).set(\"banc_id\",t.banc_id).set(\"company_id\",t.company_id).set(\"acc_type\",t.acc_type).set(\"banc_account\",t.banc_account).set(\"local_account\",t.local_account);return this.http.put(this.url+\"accounts/\"+t.id,o,{headers:e})},t.prototype.storeCompany=function(t){this.checkKeys();var e=new n.g({\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.post(this.url+\"companies\",JSON.stringify(t),{headers:e})},t.prototype.storeBanc=function(t){this.checkKeys();var e=new n.g({\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.post(this.url+\"bancs\",JSON.stringify(t),{headers:e})},t.prototype.storeUser=function(t){this.checkKeys();var e=new n.g({\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.post(this.url+\"users\",JSON.stringify(t),{headers:e})},t.prototype.getUserComapnies2=function(t){},t.prototype.getUserCompanies=function(t){return this.http.get(this.url+\"users/\"+t+\"/companies\")},t.prototype.setCurrentCompany=function(t,e){this.checkKeys();var o=new n.g({\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.get(\"mdp.globalsys.co/api/users/setcompany/\"+e+\"/\"+t,{headers:o})},t.prototype.getAccesToken=function(t){var e=this;this.checkKeys();var o=(new n.h).set(\"grant_type\",\"password\").set(\"client_id\",\"5\").set(\"client_secret\",\"me5U5SPcbjZdaDupYSYHWCachXaR1igXw1zWXMlZ\").set(\"username\",t.email).set(\"password\",t.password);a.a.fire({allowOutsideClick:!1,type:\"info\",text:\"Espere por favor\"}),a.a.showLoading(),this.http.post(this.url+\"oauth/token\",o).subscribe(function(o){a.a.close();var n=Date.now(),r=1e3*o.expires_in+n;localStorage.setItem(\"access_token\",o.access_token),localStorage.setItem(\"createed_at\",n.toString()),localStorage.setItem(\"expires_in\",r.toString()),localStorage.setItem(\"refresh_token\",o.refresh_token),e.setCurrentCompany(t.id,t.current_company).subscribe(function(t){e.router.navigate([\"/main/companies\"])},function(t){console.log(t)})},function(t){console.log(t.error.error),a.a.fire({type:\"info\",text:t.error.error})})},t.prototype.getUsersList=function(){this.checkKeys();var t=new n.g({\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.get(\"${this.url}companies/1/users\",{headers:t})},t.prototype.newVerifyToken=function(t){this.checkKeys();var e=new n.g({\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.get(this.url+\"users/newToken/\"+t,{headers:e})},t.prototype.postForm=function(t,e){this.checkKeys();var o=new n.g({Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return this.http.post(\"\"+this.url+e,t,{headers:o}).pipe(Object(r.a)(function(t){return t}))},t.prototype.uploadFile=function(t,e){this.checkKeys();var o=new n.g({Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")});return console.log(t.get(\"file\")),this.http.post(\"\"+this.url+e,t,{headers:o}).pipe(Object(r.a)(function(t){return t.data}))},t.ngInjectableDef=p.U({factory:function(){return new t(p.Y(n.c),p.Y(h.o),p.Y(i.a))},token:t,providedIn:\"root\"}),t}()},\"Tj/N\":function(t,e,o){\"use strict\";o.d(e,\"a\",function(){return n});var n=function(){function t(){}return t.prototype.setValues=function(t){console.log(t),this.id=t.id,this.email=t.email,this.password=t.password,this.current_company=t.current_company,this.names=t.names,this.type=t.type,this.last_names=t.last_names},t}()}}]);","extractedComments":[]}