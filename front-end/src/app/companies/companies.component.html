

<div class="row">
    <!-- <button (click)="onClick( tabset)">name</button> -->
    
  <div class="col-md-12">
      <div class="card">
          <div class="card-body">
              <h3 class="card-title">Crear Empresa</h3>
              <h6 class="card-subtitle">Creación de Empresas para el sistema</h6>
              <ngb-tabset #tabSet >
                <ngb-tab title="Listado" id="List">
                  <ng-template ngbTabContent>
                      <!-- LISTADO DE USUARIOS -->
                    <div class="row">
  
                      <div class="col-12">
                          <div class="card">
                              <div class="card-body">
                                  <h4 class="card-title">Listado de Empresas</h4>
                                  <h6 class="card-subtitle">Empresas creadas</h6>
                              </div>
                              <div class="table-responsive m-t-20">
                                  <table class="table table-bordered table-responsive-md  ">
                                      <thead class ="bg-info text-white border border-info">
                                          <tr >
                                              <th scope="col">#</th>
                                              <th scope="col">Empresa</th>
                                              <th scope="col">Sector</th>
                                              <th scope="col">Nit</th>
                                              <th scope="col">Dirección</th>
                                              <!-- <th scope="col"></th> -->
                                              
                                          </tr>
                                      </thead>
                                      <tbody >
                                          <tr *ngFor="let company of companies; let i=index">
                                              <th scope="row">{{i+1}}</th>
                                              <td>{{ company.name }}</td>
                                              <td>{{ company.sector }}</td>
                                              <td>{{ company.nit }}</td>
                                              <td>{{ company.address }}</td>
                                              <td><i (click)="editCompany(company)" 
                                                    title = "Editar" 
                                                    class="ti-pencil-alt actionIcon"></i></td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>
                      
                    </div>
                  </ng-template>
                </ngb-tab>
                <ngb-tab id="New" title="Agregar">
                    <!-- FORMULARIO -->
                  <ng-template ngbTabContent>
                    <div class="row ">
                      
                      <div class="col-lg-6 mx-auto">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Crear Empresa</h4>
                                <h6 class="card-subtitle">Formulario para creación de empresas</h6>
                                <form class="form-horizontal p-t-20" (ngSubmit)="save( f ) " #f="ngForm">
                                    <div class="form-group row">
                                        <label for="username" class="col-sm-3 control-label">NIT*</label>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="ti-view-list-alt"></i>
                                                    </span>
                                                </div>
                                                <input type="text" 
                                                    class="form-control"  
                                                    placeholder="Nit registrado"
                                                    [(ngModel)] = "company.nit"
                                                    name = "nit"
                                                    id = "nit"
                                                    required>
                                                    
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="email4" class="col-sm-3 control-label">Nombre*</label>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="ti-pencil"></i>
                                                    </span>
                                                </div>
                                                <input type="text" 
                                                    class="form-control" 
                                                    placeholder="Razón social de la empresa"
                                                    [(ngModel)]="company.name"
                                                    name = "name" required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                            <label for="email4" class="col-sm-3 control-label">Teléfono*</label>
                                            <div class="col-sm-9">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="ti-agenda"></i>
                                                        </span>
                                                    </div>
                                                    <input type="text" 
                                                        class="form-control" 
                                                        placeholder="Número telefónico"
                                                        [(ngModel)]="company.phone"
                                                        name = "phone" required>
                                                </div>
                                            </div>
                                        </div>
                                    <div class="form-group row">
                                        <label for="web" class="col-sm-3 control-label">Sector(CIIU)*</label>
                                        <div class="col-sm-9">
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">
                                                        <i class="ti-filter"></i>
                                                    </span>
                                                </div>
                                                <input type="text" 
                                                    class="form-control" 
                                                    id="web" 
                                                    placeholder="Sector económico registrado"
                                                    name = "sector"
                                                    [(ngModel)] = "company.sector" required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                            <label for="email4" class="col-sm-3 control-label">Dirección*</label>
                                            <div class="col-sm-9">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">
                                                            <i class="ti-direction-alt"></i>
                                                        </span>
                                                    </div>
                                                    <input type="text" 
                                                        class="form-control" 
                                                        placeholder="Dirección"
                                                        name = "address"
                                                        [(ngModel)]="company.address" required>
                                                </div>
                                            </div>
                                        </div>
                                    <div class="form-group row">
                                        <label class="col-sm-3 control-label">Departamento*</label>
                                        <div class="col-sm-9">
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="inputGroupSelect01"><i class="ti-world"></i></label>
                                                </div>
                                                <select class="custom-select" 
                                                    name="state_id"
                                                    [(ngModel)]="company.state_id"
                                                    (change)="stateChange('new')" required>
                                                    <option selected></option>
                                                    <option [value]="state.id" *ngFor="let state of statesList">{{state.name}}</option>
                                                    
                                                    
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-sm-3 control-label">Ciudad*</label>
                                        <div class="col-sm-9">
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="inputGroupSelect01"><i class="ti-world"></i></label>
                                                </div>
                                                <select class="custom-select" 
                                                    name="city"
                                                    [(ngModel)]="company.city_id" required>
                                                        <option selected></option>
                                                        <option [value]="city.id" *ngFor="let city of citiesList">{{city.name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row m-b-0">
                                        <div class="offset-sm-3 col-sm-9">
                                            <button type="submit" class="btn btn-info m-r-5 waves-effect waves-light">Crear</button>
                                            <button type="submit" class="btn btn-danger m-r-5 waves-effect waves-light">Cancelar</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                      </div>

                    </div>
                  </ng-template>
                </ngb-tab>
                <ngb-tab title="Editar"  id='updateTab' [disabled]="updateDisabled">
                    <ng-template ngbTabContent>
                        <div class="row ">
                            <div class="col-lg-6 mx-auto">
                              <div class="card">
                                  <div class="card-body">
                                      <h4 class="card-title">Editar Empresa</h4>
                                      <h6 class="card-subtitle">Formulario para actualización de información</h6>
                                      <form class="form-horizontal p-t-20" (ngSubmit)="update( f2 ) " #f2="ngForm">
                                          <div class="form-group row">
                                              <label for="username" class="col-sm-3 control-label">NIT*</label>
                                              <div class="col-sm-9">
                                                  <div class="input-group">
                                                      <div class="input-group-prepend">
                                                          <span class="input-group-text">
                                                              <i class="ti-view-list-alt"></i>
                                                          </span>
                                                      </div>
                                                      <input type="text" 
                                                          class="form-control"  
                                                          placeholder="Nit registrado"
                                                          [(ngModel)] = "companyUpdate.nit"
                                                          name = "nit"
                                                          id = "nit"
                                                          required>
                                                          
                                                  </div>
                                              </div>
                                          </div>
                                          <div class="form-group row">
                                              <label for="email4" class="col-sm-3 control-label">Nombre*</label>
                                              <div class="col-sm-9">
                                                  <div class="input-group">
                                                      <div class="input-group-prepend">
                                                          <span class="input-group-text">
                                                              <i class="ti-pencil"></i>
                                                          </span>
                                                      </div>
                                                      <input type="text" 
                                                          class="form-control" 
                                                          placeholder="Razón social de la empresa"
                                                          [(ngModel)]="companyUpdate.name"
                                                          name = "name">
                                                  </div>
                                              </div>
                                          </div>
                                          <div class="form-group row">
                                                  <label for="email4" class="col-sm-3 control-label">Teléfono*</label>
                                                  <div class="col-sm-9">
                                                      <div class="input-group">
                                                          <div class="input-group-prepend">
                                                              <span class="input-group-text">
                                                                  <i class="ti-agenda"></i>
                                                              </span>
                                                          </div>
                                                          <input type="text" 
                                                              class="form-control" 
                                                              placeholder="Número telefónico"
                                                              [(ngModel)]="companyUpdate.phone"
                                                              name = "phone">
                                                      </div>
                                                  </div>
                                              </div>
                                          <div class="form-group row">
                                              <label for="web" class="col-sm-3 control-label">Sector(CIIU)*</label>
                                              <div class="col-sm-9">
                                                  <div class="input-group">
                                                      <div class="input-group-prepend">
                                                          <span class="input-group-text">
                                                              <i class="ti-filter"></i>
                                                          </span>
                                                      </div>
                                                      <input type="text" 
                                                          class="form-control" 
                                                          id="web" 
                                                          placeholder="Sector económico registrado"
                                                          name = "sector"
                                                          [(ngModel)] = "companyUpdate.sector">
                                                  </div>
                                              </div>
                                          </div>
                                          <div class="form-group row">
                                                  <label for="email4" class="col-sm-3 control-label">Dirección*</label>
                                                  <div class="col-sm-9">
                                                      <div class="input-group">
                                                          <div class="input-group-prepend">
                                                              <span class="input-group-text">
                                                                  <i class="ti-direction-alt"></i>
                                                              </span>
                                                          </div>
                                                          <input type="text" 
                                                              class="form-control" 
                                                              placeholder="Dirección"
                                                              name = "address"
                                                              [(ngModel)]="companyUpdate.address">
                                                      </div>
                                                  </div>
                                              </div>
                                          <div class="form-group row">
                                              <label class="col-sm-3 control-label">Departamento*</label>
                                              <div class="col-sm-9">
                                                  <div class="input-group mb-3">
                                                      <div class="input-group-prepend">
                                                          <label class="input-group-text" for="inputGroupSelect01"><i class="ti-world"></i></label>
                                                      </div>
                                                      <select class="custom-select" 
                                                          name="state"
                                                          [(ngModel)]="companyUpdate.state_id"
                                                          (change)="stateChange('update')">
                                                          <option selected></option>
                                                          <option 
                                                            [value]="state.id" *ngFor="let state of statesList">{{state.name}}</option>
                                                          
                                                          
                                                      </select>
                                                      <!-- <select class="custom-select" 
                                                            name="state"
                                                            ng-options="state.id as state.name for state in statesList" 
                                                            [(ngModel)]="companyUpdate.locations.state_id">
                                                        </select> -->
                                                  </div>
                                              </div>
                                          </div>
                                          <div class="form-group row">
                                              <label class="col-sm-3 control-label">Ciudad*</label>
                                              <div class="col-sm-9">
                                                  <div class="input-group mb-3">
                                                      <div class="input-group-prepend">
                                                          <label class="input-group-text" for="inputGroupSelect01"><i class="ti-world"></i></label>
                                                      </div>
                                                      <select class="custom-select" 
                                                          name="city"
                                                          [(ngModel)]="companyUpdate.city_id">
                                                              <option selected></option>
                                                              <option [value]="city.id" *ngFor="let city of citiesList">{{city.name}}</option>
                                                      </select>
                                                  </div>
                                              </div>
                                          </div>
                                          <div class="form-group row m-b-0">
                                              <div class="offset-sm-3 col-sm-9">
                                                  <button type="submit" class="btn btn-info m-r-5 waves-effect waves-light">Actualizar</button>
                                                  <button (click)="cancel()"
                                                    type="button" class="btn btn-danger m-r-5 waves-effect waves-light">Cancelar</button>
                                              </div>
                                          </div>
                                      </form>
                                  </div>
                              </div>
                            </div>
      
                        </div>
                    </ng-template>
                  </ngb-tab>
              </ngb-tabset>
      </div>
      </div>
  </div>
</div>